# Инструкция

Проект состоит из двух частей: бекенда и фронтенда. Для работы проекта нужно запустить обе части.

## Бекенд
Представляет из себя `NodeJS` приложение, в котором реализован API для запросов кнопки.
Репозиторий https://github.com/arthurpokrashenko/bttn-api

### Запуск
```
git clone https://github.com/arthurpokrashenko/bttn-api.git
cd bttn-api
npm install
npm start
```
В консоли после запуска должно появиться сообщение
```
Example app listening on port 8081!
```
Проект запустился на `localhost` на порту `8081`.
Если открыть ссылку http://localhost:8081/health-check, то в браузере должно появиться следующее:
```
{
  status: "ok"
}
```
Это означает, что бекенд запустился успешно.

### Запросы
К бекенду можно делать запросы локально. По адресу http://localhost:8081/ можно делать запросы того же компьютера, на котором запущен бекенд. Если запросы будут делаться с другого компьютера, находящегося в той же Wi-Fi сети, что и компьютер, на котором запущен бекенд, то нужно обращаться по IP-адресу.

> Например, IP-адрес компьютера, на котором запущен бекенд 10.15.11.1. Это означает, что URL запросов должен иметь вид `http://10.15.11.1:8081/`.

**Как узнать IP-адрес компьютера?**
*инструкция для Mac*
1. Нажать на значок  в левом верхнем углу
2. Перейти в `System Preferences`
3. Открыть раздел `Network`
4. IP-адрес будет справа, как на скриншоте
![screenshotIP](https://image.ibb.co/fakv5K/Bitmap.png)

## Фронтенд
Представляет из себя `React` приложение, которое открывается в браузере и показывает интерфейс с информацией о количестве победителей за сегодня и номер "выигравшей" кнопки.
Репозиторий https://github.com/arthurpokrashenko/bttn-api

### Запуск
```
git clone https://github.com/arthurpokrashenko/bttn-client.git
cd bttn-client
npm install
npm start
```

В консоли после запуска должно появиться сообщение об успешном запуске

Проект запустился на `localhost` на порту `3000`.
Если открыть ссылку http://localhost:3000/, то в браузере должен появиться интерфейс.


# Настройка кнопок для локального бекенда
После того, как мы запустили наш бекенд, нужно правильно настроить кнопки.
Кнопки должны быть подключены к той же Wi-Fi сети, к которой подключен компьютер, на котором запущен бекенд.
Запросы с кнопок должны идти на IP-адрес компьютера, на котором запущен бекенд.
Информация о том, как узнать IP-адрес компьютера, приведена выше.

## Запросы

Отправляется при нажатии кнопки
`GET http://localhost:8081/event/5`
Вместо `localhost` должен быть IP-адрес компьютера, на котором запущен бекенд.
`5` – это номер кнопки. Именно этот номер будет показан в интерфейсе в случае выигрыша.

Ответ от API может быть со следующими кодами:
`200` – кнопка выиграла
`400` – кнопка проиграла

## Настройка
Изменить число «Каждый **N** выигравший» можно из интерфейса, нажав внизу на иконку настроек.
В конфиге, находящемся по адресу: `~/.config/configstore/obi.json`
Очистить базу можно удалив файл `events.db`, находящийся на уровень выше от папки `bttn-api`.


## API статистики
По следующим ссылкам от бекенда можно получить информацию о событиях:

* Все события за сегодня – http://localhost:8081/event/today
* Все события за все время – http://localhost:8081/event/all
* Все выигравшие кнопки за сегодня – http://localhost:8081/event/today/winners
* Все выигравшие кнопки за все время – http://localhost:8081/event/all/winners


## Подключение мониторов
Для отображения интерфейса на мониторе нужно открыть брвузер и будучи подключенным к wi-fi сети, в которой запущен сервер, перейти по ссылке http://localhost:3000/
